#pragma once

#include "swirly/util/ForEach.js"

var VLPrograms = {
   'Trumpet':  [0, 0],
   'Maynard':  [0, 1],
   'Alpert':   [0, 2],
   'Chet_Tpt': [0, 3],
   'Lead_Tpt': [0, 4],
   'ClassTpt': [0, 5],
   'StrMtTpt': [0, 6],
   'CupMtTpt': [0, 7],
   'WahMtTpt': [0, 8],
   'WaTptCC4': [0, 9],
   'HrmMtTpt': [0, 10],
   'Mute_Tpt': [0, 11],
   'Picc_Tpt': [0, 12],
   'Cornet':   [0, 13],
   'Flugel':   [0, 14],
   'Mangione': [0, 15],
   'Big_Bone': [0, 17],
   'BriteTbn': [0, 18],
   'ValveTbn': [0, 19],
   'Jam_Bone': [0, 20],
   'Bass_Tbn': [0, 21],
   'BcktMtTb': [0, 22],
   'WX_Horn':  [0, 24],
   'BrassHrn': [0, 25],
   'BriteHrn': [0, 26],
   'ff_Horn':  [0, 27],
   'OrchHorn': [0, 28],
   'New_Horn': [0, 29],
   'Euphnium': [0, 30],
   'Tuba':     [0, 31],
   'SoprnoSx': [0, 32],
   'HeyKenG_': [0, 34],
   'Branford': [0, 35],
   'TraneSop': [0, 36],
   'BrtSopSx': [0, 37],
   'Alto_Sax': [0, 38],
   'Sanborn':  [0, 39],
   'BirdAlto': [0, 40],
   'ExprAlto': [0, 41],
   'Desmond':  [0, 42],
   'Koz_Alto': [0, 43],
   'Everette': [0, 44],
   'NY_Alto':  [0, 45],
   'TenorSax': [0, 47],
   'MBrecker': [0, 48],
   'PopTenor': [0, 49],
   'SoulTenr': [0, 50],
   'RaspyTnr': [0, 51],
   'Getz_Tnr': [0, 52],
   'JobimTnr': [0, 53],
   'TenorSub': [0, 54],
   'Bari_Sax': [0, 55],
   'Sax_Sect': [0, 57],
   'Air_Sax':  [0, 58],
   'Saxual':   [0, 59],
   'Sanford':  [0, 60],
   'Piccolo':  [0, 61],
   'Flute':    [0, 62],
   'Real_Flt': [0, 63],
   'SilvrFlt': [0, 64],
   'ClassFlt': [0, 65],
   'Nz_Flute': [0, 66],
   'VoxFlute': [0, 67],
   'AquaFlut': [0, 68],
   'OakFlute': [0, 69],
   'Bass_Flt': [0, 70],
   'Afri_Flt': [0, 71],
   'PennyWhs': [0, 72],
   'TinWhist': [0, 73],
   'Flutofon': [0, 74],
   'Inca_Flt': [0, 75],
   'Noze_Flt': [0, 76],
   'Quena':    [0, 77],
   'Quena_x2': [0, 78],
   'PanFlute': [0, 79],
   'Andean':   [0, 80],
   'Pan_Pipe': [0, 81],
   'Bali_Flt': [0, 82],
   'IndiaFlt': [0, 83],
   'Ambience': [0, 84],
   'WetFone':  [0, 85],
   'Maya_Flt': [0, 86],
   'Shakuhat': [0, 87],
   'Bamboo':   [0, 88],
   'PanPicol': [0, 89],
   'Coca__':   [0, 90],
   'Ocarina_': [0, 91],
   'Lonely':   [0, 92],
   'Recorder': [0, 93],
   'JazzClar': [0, 95],
   'ClsClrnt': [0, 96],
   'Bs_Clrnt': [0, 97],
   'Oboe':     [0, 99],
   'Eng_Horn': [0, 100],
   'SftEngHn': [0, 101],
   'Bassoon':  [0, 102],
   'Flurinet': [0, 103],
   'Crumbon':  [0, 104],
   'Klarina':  [0, 105],
   'ThaiReed': [0, 106],
   'Chanter':  [0, 107],
   'Digirdoo': [0, 108],
   'IslePipe': [0, 109],
   'SoftPipe': [0, 110],
   'LitePipe': [0, 111],
   'CelloSax': [0, 112],
   'YamaBotl': [0, 113],
   'Solo_Vln': [0, 114],
   'DrkVioln': [0, 115],
   'SweetVln': [0, 117],
   'Fiddle':   [0, 118],
   'Viola':    [0, 119],
   'SwtViola': [0, 120],
   'RosinVla': [0, 121],
   'Cello':    [0, 122],
   'SoloCell': [0, 123],
   'DrkCello': [0, 124],
   'Bow_Bass': [0, 125],
   'HiStrEns': [0, 126],
   'Pizzicat': [0, 127],
   'Harmonca': [1, 0],
   'MouthHrp': [1, 1],
   'BluesHrm': [1, 2],
   'Stevie_':  [1, 3],
   'Toots_':   [1, 4],
   'Accordn_': [1, 5],
   'Concrtna': [1, 6],
   'Jazz_B3':  [1, 7],
   'Clavinet': [1, 8],
   'Funky':    [1, 9],
   'SteelDrm': [1, 10],
   'Yangchin': [1, 12],
   'Asia_Plk': [1, 13],
   'JapanPlk': [1, 14],
   'Tambura':  [1, 15],
   'Sitar':    [1, 16],
   'ElecHarp': [1, 17],
   'SteelGtr': [1, 18],
   'AcGuitar': [1, 19],
   'Flamenco': [1, 20],
   'SpainGtr': [1, 21],
   'NylonGtr': [1, 22],
   'SwtNylGt': [1, 23],
   'Les_Gtr':  [1, 24],
   'Joe_Pass': [1, 25],
   'FMGuitar': [1, 26],
   'Lucille':  [1, 27],
   '__PAT__':  [1, 28],
   'EFXStrat': [1, 29],
   'ClnStrat': [1, 30],
   'Surf_Gtr': [1, 31],
   'Mute_Gtr': [1, 32],
   'WahGtCC4': [1, 33],
   'PatSynGt': [1, 34],
   'BluesGtr': [1, 35],
   'Clapton':  [1, 36],
   'PopODGtr': [1, 37],
   'Carlos':   [1, 38],
   'TubeGtr_': [1, 39],
   'FET_Guit': [1, 40],
   'Dist_Gtr': [1, 41],
   'Wah_Lead': [1, 42],
   'Wah_Dist': [1, 43],
   'Eddie4th': [1, 45],
   'Feedback': [1, 46],
   'Hendrix':  [1, 47],
   'TalkBox_': [1, 48],
   '_XTREME_': [1, 49],
   'Hercules': [1, 50],
   'SynClav':  [1, 51],
   'Syncro':   [1, 52],
   'Avalana':  [1, 54],
   'Voxanne':  [1, 55],
   'Beauty':   [1, 56],
   'SpaceOut': [1, 57],
   'PtchNoiz': [1, 59],
   'BreathTb': [1, 60],
   'Air_Lead': [1, 61],
   'Breezer':  [1, 62],
   'ZawiLead': [1, 63],
   'Voxofone': [1, 64],
   'Whistler': [1, 65],
   'Debussy':  [1, 66],
   'Sines':    [1, 67],
   'SmoothLd': [1, 68],
   'Slinky':   [1, 69],
   'AirStick': [1, 70],
   'RotoFone': [1, 71],
   'Vox_Lead': [1, 72],
   'Squeezy':  [1, 73],
   'Lyricon':  [1, 74],
   'Ana_Lead': [1, 75],
   'Mobius':   [1, 76],
   '_70sLead': [1, 77],
   'Osc_Lead': [1, 78],
   'Saw_Lead': [1, 79],
   'SAWS':     [1, 80],
   'ResoSaws': [1, 81],
   'EML_Lead': [1, 82],
   'HPFilter': [1, 83],
   'EWI_ARP':  [1, 84],
   'EWI_Lead': [1, 85],
   'Koz_Lead': [1, 86],
   'MattLead': [1, 87],
   'PATCHMAN': [1, 88],
   'Taurus':   [1, 89],
   'Phaser':   [1, 90],
   'SynZilla': [1, 91],
   'MegaSyn':  [1, 92],
   'Winwood':  [1, 93],
   'Pulse_Ld': [1, 94],
   'Corea':    [1, 95],
   'SquareLd': [1, 96],
   'Korg_Ld':  [1, 97],
   'LuckyMan': [1, 98],
   'Lyle':     [1, 99],
   'Analog':   [1, 100],
   'Nyle':     [1, 101],
   'Floyd_Ld': [1, 102],
   'BorgHorn': [1, 103],
   'Freik':    [1, 104],
   'Fazar':    [1, 105],
   'Dungeon':  [1, 106],
   'NevrLand': [1, 107],
   'Brekord1': [1, 108],
   'Brekord2': [1, 109],
   'Brekord3': [1, 110],
   'MotownBs': [1, 112],
   'SteinBas': [1, 113],
   'FunkBass': [1, 114],
   'PickBass': [1, 115],
   'SnapBass': [1, 116],
   'Thumb_Bs': [1, 117],
   'TiteBass': [1, 118],
   'JacoBass': [1, 119],
   'StratoBs': [1, 120],
   'Sticky':   [1, 121],
   'MuteBass': [1, 122],
   'Ac_Bass':  [1, 123],
   'Juicy_Bs': [1, 124],
   'GnarlyBs': [1, 125],
   'Moog_Bs':  [1, 126],
   'Bass1000': [1, 127],

   'ElecBass': [3, 0],
   'VL_Drums': [3, 1],
   'NY_Tenor': [3, 2],
   'GuitHero': [3, 3],
   'Ghost_Ld': [3, 4],
   'Theremin': [3, 5],
   'Trombone': [3, 6],
   'TiteBari': [3, 7],
   'DorseyTb': [3, 8],
   'Clarinet': [3, 9],
   'BrtBsClr': [3, 10],
   'BrtVioln': [3, 11],
   'KennyGee': [3, 12],
}

var VL = {};

VL.normalize = function(s) {
    return s.replace(/_/g, '').toLowerCase();
};

VL.normalizedTable = function(table) {
    var result = {};
    forEach(table, function(pc, name) {
        result[VL.normalize(name)] = pc;
    });
    return result;
};

VL.programs = VL.normalizedTable(VLPrograms);


VL.getProgram = function(name) {
    return VL.programs[VL.normalize(name)];
};

VL.Program = function(show, name) {
    var program = VL.getProgram(name),
        bank = program[0],
        pc = program[1],
        object = show.objects.maxclass.unpack;

    return function() { object.message(bank, pc); };
};

VL.makeScene = function(show, desc) {
    var program = VL.getProgram(desc),
        bank = program[0],
        pc = program[1],
        object = show.objects.maxclass.unpack;

    return function() {
        object.message(bank, pc);
    };
};
